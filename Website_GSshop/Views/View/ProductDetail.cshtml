@using Website_GSshop.Models
@model Product
@{
    ViewBag.Title = "ProductDetail";
    Layout = "~/Views/Shared/_Layout.cshtml";
    User sesus = (User)Session["user"];
    Data_GSShopEntities db = new Data_GSShopEntities();
}
@{
    List<Favourite> fa = db.Favourite.ToList();
    List<Favourite> pr = db.Favourite.Where(n => n.product_id == Model.product_id && n.fa_bin == false).ToList();
    List<Product> products = db.Product.ToList();
}
<link href="~/Content/CSS/product_detail.css" rel="stylesheet" />
<link rel='stylesheet' href='https://sachinchoolur.github.io/lightslider/dist/css/lightslider.css'>
<div class="container-fluid" style="background-color: #f9f9f9">
    <div class="container-fluid mt-2 mb-3" style="background-color: #f9f9f9">
        <div class="row no-gutters">
            <div class="col-md-5 pr-2">
                <div class="card">
                    <div class="demo">
                        <ul id="lightSlider" class="ul_detail">
                            @foreach (var item in products.Where(n => n.product_related == Model.product_related))
                            {
                                <li data-thumb="/Content/Layout/images/@item.product_image" class="li_detail"> <img class="img_detail" src="~/Content/Layout/images/@item.product_image" /> </li>
                            }
                        </ul>
                    </div>
                </div>
                <div class="card mt-2">
                    <h6>Reviews</h6>
                    <div class="d-flex flex-row">
                        <div class="stars"> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i>  <i class="fa fa-star-half-o"></i> </div> <span class="ml-1 font-weight-bold">4.6</span>
                    </div>
                    <hr>
                    <div class="badges"> <span class="badge bg-dark ">All (230)</span> <span class="badge bg-dark "> <i class="fa fa-comments-o"></i> 23 </span> <span class="badge bg-warning">  <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <span class="ml-1">2,123</span> </span> </div>
                    <hr>
                    <div class="comment-section">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="d-flex flex-row align-items-center">
                                <img src="https://i.imgur.com/o5uMfKo.jpg" class="rounded-circle profile-image">
                                <div class="d-flex flex-column ml-1 comment-profile">
                                    <div class="comment-ratings"> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> </div> <span class="username">Lori Benneth</span>
                                </div>
                            </div>
                            <div class="date"> <span class="text-muted">2 May</span> </div>
                        </div>
                        <hr>
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="d-flex flex-row align-items-center">
                                <img src="https://i.imgur.com/tmdHXOY.jpg" class="rounded-circle profile-image">
                                <div class="d-flex flex-column ml-1 comment-profile">
                                    <div class="comment-ratings"> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> </div> <span class="username">Timona Simaung</span>
                                </div>
                            </div>
                            <div class="date"> <span class="text-muted">12 May</span> </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-7">
                <div class="card">
                    <div class="d-flex flex-row align-items-center ml-1">
                        <div class="p-ratings"> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> </div> <small class="ml-1">(5.0)</small>
                    </div>
                    <h3 class="font-weight-bold text-primary">@Model.product_name </h3>
                    <h4 class="font-weight-bold ml-1 text-left">@{float sale = (float)Model.product_sale;}@sale.ToString("#,##0") ₫&nbsp;&nbsp;&nbsp;&nbsp;<s>@{float price = (float)Model.product_price;}@price.ToString("#,##0") ₫</s></h4>
                    <div class="buttons row">   
                        <div class="col-md-3">
                            <button class="btn btn-outline-warning btn-long cart" onclick="window.location.href='@Url.Action("CreateCart","Cart", new { id = Model.product_id })'">THÊM VÀO GIỎ</button>
                        </div>
                        <div class="col-md-9">
                            <form method="post" action="@Url.Action("Favourite","Favourite",new {id = Model.product_id})">
                                <button class="btn btn-warning btn-long buy">MUA NGAY</button>
                                @if (sesus != null)
                                {
                                    if (ViewBag.ProductCount == 0)
                                    {
                                        <button class="btn btn-light wishlist ml-3" type="submit"><i class="fa fa-heart font-weight-500"> @pr.Count</i></button>
                                    }
                                    else
                                    {
                                        foreach (var item in fa.Where(n => n.user_id == sesus.user_id && n.product_id == Model.product_id && n.fa_bin == false))
                                        {
                                            <a href="@Url.Action("FavouriteDelete","Favourite",new {id = item.fa_id})" class="btn btn-light wishlist1 ml-3"> <i class="fa fa-heart mt-2"></i> @pr.Count</a>
                                        }
                                    }
                                }
                                else
                                {
                                    <button class="btn btn-light wishlist ml-3"> <i class="fa fa-heart"> @pr.Count</i> </button>
                                }
                            </form>
                        </div>
                    </div>
                    <hr>
                    <div class="product-description">
                        <span class="font-weight-bold">Màu sắc:</span>
                        <div class="my-color">
                            <label class="radio"> <input type="radio" name="gender" value="MALE" checked> <span class="red"></span> </label>
                            <label class="radio"> <input type="radio" name="gender" value="FEMALE"> <span class="blue"></span> </label>
                            <label class="radio"> <input type="radio" name="gender" value="FEMALE"> <span class="green"></span> </label>
                            <label class="radio"> <input type="radio" name="gender" value="FEMALE"> <span class="orange"></span> </label>
                        </div>
                        <div class="d-flex flex-row align-items-center"> <i class="fa fa-motorcycle"></i> @if (Model.product_ship == true)
                        {<span class="ml-1">Free ship</span>}
                        else
                        {<span class="ml-1">Tính phí</span>} </div>
                        <div class="mt-2">
                            <span class="font-weight-bold">Mô tả sản phẩm</span>
                            <br />
                            <span class="text-gray">@Model.product_description</span>
                            <div class="bullets">
                                <div class="d-flex align-items-center"> <span class="dot"></span> <span class="bullet-text">@Model.product_note</span> </div>
                            </div>
                        </div>
                        <div class="mt-2"> <span class="font-weight-bold">Store</span> </div>
                        <div class="d-flex flex-row align-items-center">
                            <img src="https://i.imgur.com/N2fYgvD.png" class="rounded-circle store-image">
                            <div class="d-flex flex-column ml-1 comment-profile">
                                <div class="comment-ratings"> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i>  <i class="fa fa-star"></i> </div> <span class="username">Rare Boutique</span> <small class="followers">25K Followers</small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card mt-2">
                    <span>Sản phẩm liên quan:</span>
                    <div class="similar-products mt-2 d-flex flex-row">
                        @foreach (var item in products.Where(n => n.product_id >= 2).Take(5))
                        {
                            <div class="card border p-1" style="width: 9rem; margin-right: 3px;">
                                <img src="~/Content/Layout/images/@item.product_image" class="card-img-top" alt="...">
                                <div class="card-body">
                                    <h5 class="card-title text-center">@{float psale = (float)item.product_sale;}@psale.ToString("#,##0") ₫</h5>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js'></script>
<script src='https://sachinchoolur.github.io/lightslider/dist/js/lightslider.js'></script>
<script>
    $('#lightSlider').lightSlider({
        gallery: true,
        item: 1,
        loop: true,
        slideMargin: 0,
        thumbItem: 9
    });
</script>








